// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model PlayerStats {
  id                 BigInt     @id @default(autoincrement())
  name               String
  avatar             String

  gamesPlayed        Int
  gamesWon           Int
  gamesLost          Int
  gamesDrawn         Int

  kills              Int
  deaths             Int
  assists            Int
  headshots          Int
  damage             Int
  roundsWon          Int
  totalRounds        Int
  aces               Int
  clutches           Int
  mvps               Int
  entryFrags         Int

  killsThroughSmoke  Int 
  killsThroughFlash  Int 
  killsThroughWall   Int
  killsInJump        Int

  clutches1v1Played  Int
  clutches1v1Won     Int
  clutches1v2Played  Int
  clutches1v2Won     Int
  clutches1v3Played  Int
  clutches1v3Won     Int
  clutches1v4Played  Int
  clutches1v4Won     Int
  clutches1v5Played  Int
  clutches1v5Won     Int

  lastFiveMatchesOutcome String

  kda                Float
  kd                 Float

  winRatePercentage  Float
  headshotPercentage Float
  roundsWinPercentage Float

  damagePerRound     Float

  killsPerGame       Float
  deathsPerGame      Float
  assistsPerGame     Float
  headshotsPerGame   Float
  roundsWonPerGame   Float
  totalRoundsPerGame Float
  damagePerGame      Float
  mvpsPerGame        Float
  acesPerGame        Float
  clutchesPerGame    Float
  entryFragsPerGame  Float

  killsThroughSmokePerGame Float
  killsThroughWallPerGame  Float
  killsOnFlashPerGame      Float
  killsInJumpPerGame       Float

  clutches1v1WinPercentage Float
  clutches1v2WinPercentage Float
  clutches1v3WinPercentage Float
  clutches1v4WinPercentage Float
  clutches1v5WinPercentage Float

  weapons           WeaponStats[]
  maps              MapStats[]
}

model MapStats {
  id          Int    @id @default(autoincrement())
  name        String
  gamesPlayed Int        @default(0)
  wins        Int        @default(0)
  draws       Int        @default(0)
  losses      Int        @default(0)
  winRatePercentage Float @default(0)
  totalGamesLength Float      @default(0)
  averageGameLength Float      @default(0)
  roundsPlayed Int        @default(0)
  roundsWon    Int        @default(0)
  averageRoundsPerGame Float   @default(0)
  averageRoundsWonPerGame Float @default(0)
  playerId    BigInt
  player      PlayerStats @relation(fields: [playerId], references: [id])
}

model WeaponStats {
  id          Int    @id @default(autoincrement())
  name        String
  Kills       Int        @default(0)
  deaths      Int        @default(0)
  averageKillsPerGame Float   @default(0)
  averageDeathsPerGame Float  @default(0)
  playerId    BigInt
  player      PlayerStats @relation(fields: [playerId], references: [id])
}